VideoPose3D æ¨ç†ä¸æ¸²æŸ“æ“ä½œæŒ‡å— (Linux GPU ç‰ˆ)
æœ¬é¡¹ç›®è¯¦ç»†è®°å½•äº†åœ¨ GPU æœåŠ¡å™¨ç¯å¢ƒä¸‹ï¼Œä»åŸå§‹è§†é¢‘åˆ° 3D å§¿æ€ä¼°è®¡è§†é¢‘ç”Ÿæˆçš„å®Œæ•´å·¥ä½œæµã€‚

ğŸ“‹ ç¯å¢ƒä¾èµ–
åœ¨å¼€å§‹è¿è¡Œä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

ç³»ç»Ÿå·¥å…·ï¼šFFmpeg (å¿…é¡»ï¼Œç”¨äºè§†é¢‘è§£æ)

Bash

sudo apt-get update && sudo apt-get install ffmpeg -y
æƒé‡æ–‡ä»¶ï¼šä¸‹è½½ pretrained_h36m_detectron_coco.bin

å­˜æ”¾ä½ç½®ï¼šVideoPose3D-main/checkpoint/

Python ç¯å¢ƒï¼šç¡®ä¿å·²å®‰è£… detectron2, torch, numpy, omegaconf>=2.4.0.dev2ã€‚

ğŸ› ï¸ ç›®å½•åˆå§‹åŒ–
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºå¿…è¦çš„è¾“å…¥è¾“å‡ºç›®å½•ï¼š

Bash

mkdir -p /root/VideoPose3D-main/checkpoint      # å­˜æ”¾3Dæƒé‡
mkdir -p /root/VideoPose3D-main/output_2d       # å­˜æ”¾2Då…³é”®ç‚¹æ•°æ®
mkdir -p /root/my_videos                        # å­˜æ”¾åŸå§‹mp4è§†é¢‘
ğŸš€ ç”Ÿäº§æµæ°´çº¿ (Pipeline)
å¤„ç†æ–°è§†é¢‘æ—¶ï¼Œè¯·æŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š

1. 2D å…³é”®ç‚¹æå– (Inference)
å°†è§†é¢‘ä¸­çš„äººä½“åƒç´ è½¬æ¢ä¸º 2D åæ ‡ã€‚

Bash

cd /root/VideoPose3D-main/inference

python infer_video_d2.py \
    --cfg COCO-Keypoints/keypoint_rcnn_R_101_FPN_3x.yaml \
    --output-dir ../output_2d \
    --image-ext mp4 \
    /root/my_videos/
æ³¨æ„ï¼šè‹¥é‡åˆ° ValueError: setting an array element with a sequenceï¼Œè¯·ä¿®æ”¹ infer_video_d2.py ä¸­çš„ np.savez_compressed éƒ¨åˆ†ï¼Œä¸ºæ•°ç»„æ·»åŠ  dtype=objectã€‚

2. æ ¼å¼è½¬æ¢ (Data Preparation)
å°† 2D æ£€æµ‹ç»“æœæ‰“åŒ…ä¸º VideoPose3D ä¸“ç”¨çš„è‡ªå®šä¹‰æ•°æ®é›†æ ¼å¼ã€‚

Bash

cd /root/VideoPose3D-main/data

python prepare_data_2d_custom.py -i ../output_2d -o my_test_data
3. 3D æå‡ä¸è§†é¢‘æ¸²æŸ“ (3D Rendering)
å°† 2D åæ ‡æ˜ å°„åˆ° 3D ç©ºé—´å¹¶åˆæˆæœ€ç»ˆå¯¹æ¯”è§†é¢‘ã€‚

Bash

cd /root/VideoPose3D-main/

python run.py -d custom -k my_test_data -arc 3,3,3,3,3 \
    -c checkpoint --evaluate pretrained_h36m_detectron_coco.bin \
    --render --viz-subject [è§†é¢‘æ–‡ä»¶å.mp4] \
    --viz-action custom --viz-camera 0 \
    --viz-video /root/my_videos/[è§†é¢‘æ–‡ä»¶å.mp4] \
    --viz-output output_3d_viz.mp4 --viz-size 6
ğŸ’¾ ç»“æœè·å–ä¸æ•°æ®åˆ†æ
è§†é¢‘ç»“æœï¼šä¿å­˜åœ¨æ ¹ç›®å½•ä¸‹çš„ output_3d_viz.mp4ã€‚

æ•°æ®å¯¼å‡ºï¼šè‹¥éœ€å¯¼å‡º 3D åæ ‡æ•°æ®ï¼ˆ.npz æ ¼å¼ï¼‰ï¼Œå¯åœ¨ç¬¬ä¸‰æ­¥å‘½ä»¤ä¸­åŠ å…¥ --viz-export my_data.npzã€‚

æŸ¥çœ‹æ–¹æ³•ï¼šå»ºè®®é€šè¿‡ PyCharm çš„ Remote Host åˆ·æ–°å¹¶ Download åˆ°æœ¬åœ°æŸ¥çœ‹ï¼Œæˆ–ä½¿ç”¨ scp å‘½ä»¤ä¸‹è½½ã€‚

âš ï¸ é¿å‘æ€»ç»“ (FAQ)
FileNotFoundError: ffprobeï¼šç¡®è®¤ç³»ç»Ÿå·²å®‰è£… FFmpegã€‚

TypeError: cannot unpack NoneTypeï¼šæ£€æŸ¥è§†é¢‘è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œæ–‡ä»¶å¤¹å†…æ˜¯å¦æœ‰ .mp4 æ–‡ä»¶ã€‚

Inhomogeneous Shapeï¼šå¤šå‡ºç°åœ¨è§†é¢‘ä¸­äººæ•°å˜åŠ¨çš„æƒ…å†µä¸‹ï¼Œéœ€åœ¨æºç ä¸­å¼ºåˆ¶ä½¿ç”¨ dtype=object ä¿å­˜ numpy æ•°ç»„ã€‚

GPU ä¼˜åŒ–ï¼šç¡®ä¿ infer_video_d2.py çš„æ¨ç†éƒ¨åˆ†æ²¡æœ‰ .to('cpu') ä»¥å®ç°æœ€å¤§å¸§ç‡ï¼ˆ15-30 FPSï¼‰ã€‚